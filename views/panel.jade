doctype
html(ng-app="device-panel")
    head
        title Device Dash
        script(src="/socket.io/socket.io.js")
        script(src="/vendor/jquery/dist/jquery.min.js")
        script(src="/vendor/lodash/dist/lodash.min.js")
        script(src="/vendor/bootstrap/dist/js/bootstrap.js")
        link(rel="stylesheet", href="/vendor/bootstrap/dist/css/bootstrap.min.css")

        script(src='/vendor/angular/angular.js')
        script(src='/vendor/angular-sanitize/angular-sanitize.js')
        link(href="/vendor/angular-xeditable/dist/css/xeditable.css" rel="stylesheet")
        script(src="/vendor/angular-xeditable/dist/js/xeditable.js")
        link(rel="stylesheet", href="/css/style.css")

        script(src="/js/socket.js")
        script(src="/js/panel.js")
    body(ng-controller="PanelController")
        .container
            .row
                .col-md-6
                    h3 Sequences
                    .seq(ng-repeat="(name, seqobj) in sequences")
                        h4 {{name}}
                        .well.link.row(ng-repeat="r in seqobj.chain[seqobj.head]")
                            .relay.well.col-sm-6()
                                .panel.panel-default
                                    .panel-heading
                                        span.label.label-info incoming
                                    table.table.table-responsive
                                        tr(ng-repeat="(key, value) in r.incoming")
                                            td {{key}}
                                            td {{value}}
                                .panel.panel-default
                                    .panel-heading
                                        span.label.label-info outgoing
                                    table.table.table-responsive
                                        tr(ng-repeat="(key, value) in r.outgoing")
                                            td {{key}}
                                            td {{value}}
                            .relay.well.col-sm-6()
                                ul
                                    li(ng-repeat="msg in eventMessages") {{msg}}
                                        


                .col-md-6
                    h3 Devices
                    .row
                        .col-sm-12
                            #camera-information.panel.panel-default
                                .panel-heading
                                    h4 Cameras
                                    button(ng-click="newCamera()") new Camera
                                .row
                                    #camera-container.col-md-12(ng_repeat="g in camera")
                                        .thumbnail
                                            .caption
                                                h5(editable-text="g.name") {{g.name}}
                                                table.table.table-responsive.table-striped
                                                    tr
                                                        th Variable
                                                        th Value
                                                    tr(ng-repeat="(key, value) in g.status")
                                                        td {{key}}
                                                        td {{value}}
                                                button.btn.btn-warning(ng-click="closeDevice(g.name, g.deviceType)") x
                        .col-sm-12
                            #sensor-information.panel.panel-default
                                .panel-heading
                                    h4 Sensors
                                    button(ng-click="newSensor()") new sensor
                                .row
                                    #sensor-container.col-md-12(ng_repeat="g in sensor")
                                        .thumbnail
                                            .caption
                                                h5(editable-text="g.name") {{g.name}}
                                                table.table.table-responsive.table-striped
                                                    tr
                                                        th Variable
                                                        th Value
                                                    tr(ng-repeat="(key, value) in g.status")
                                                        td {{key}}
                                                        td {{value}}
                                                button.btn.btn-warning(ng-click="closeDevice(g.name, g.deviceType)") x
                        .col-sm-12
                            #terminal-information.panel.panel-default
                                .panel-heading
                                    h4 Terminals
                                    button(ng-click="newTerminal()") new terminal
                                .row
                                    #terminal-container.col-md-12(ng_repeat="g in terminal")
                                        .thumbnail
                                            .caption
                                                h5(editable-text="g.name") {{g.name}}
                                                table.table.table-responsive.table-striped
                                                    tr
                                                        th Variable
                                                        th Value
                                                    tr(ng-repeat="(key, value) in g.status")
                                                        td {{key}}
                                                        td {{value}}
                                                button.btn.btn-warning(ng-click="closeDevice(g.name, g.deviceType)") x
                        .col-sm-12
                            #gate-information.panel.panel-default
                                .panel-heading
                                    h4 Gates
                                    button(ng-click="newGate()") new gate
                                .row
                                    #gate-container.col-sm-12(ng_repeat="g in gate")
                                        .thumbnail
                                            .caption
                                                h5(editable-text="g.name") {{g.name}}
                                                table.table.table-responsive.table-striped
                                                    tr
                                                        th Variable
                                                        th Value
                                                    tr(ng-repeat="(key, value) in g.status")
                                                        td {{key}}
                                                        td {{value}}
                                                button.btn.btn-warning(ng-click="closeDevice(g.name, g.deviceType)") x

